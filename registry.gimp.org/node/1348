<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
  "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr">

<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../files/favicon.png" type="image/png" />
<link rel="alternate" type="application/rss+xml" title="Comments for &quot;vintage look&quot;" href="../crss/node/1348" />
<link rel="canonical" href="1348" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="shortlink" href="1348" />
  <title>vintage look | GIMP Plugin Registry</title>
  <style type="text/css" media="all">@import url("../modules/system/system.base.css?n48fl6");
@import url("../modules/system/system.menus.css?n48fl6");
@import url("../modules/system/system.messages.css?n48fl6");
@import url("../modules/system/system.theme.css?n48fl6");</style>
<style type="text/css" media="all">@import url("../modules/aggregator/aggregator.css?n48fl6");
@import url("../modules/book/book.css?n48fl6");
@import url("../modules/comment/comment.css?n48fl6");
@import url("../sites/all/modules/date/date_api/date.css?n48fl6");
@import url("../sites/all/modules/date/date_popup/themes/datepicker.1.7.css?n48fl6");
@import url("../sites/all/modules/date/date_repeat_field/date_repeat_field.css?n48fl6");
@import url("../modules/field/theme/field.css?n48fl6");
@import url("../sites/all/modules/mollom/mollom.css?n48fl6");
@import url("../modules/node/node.css?n48fl6");
@import url("../modules/poll/poll.css?n48fl6");
@import url("../modules/search/search.css?n48fl6");
@import url("../modules/user/user.css?n48fl6");
@import url("../modules/forum/forum.css?n48fl6");
@import url("../sites/all/modules/views/css/views.css?n48fl6");</style>
<style type="text/css" media="all">@import url("../sites/all/modules/ctools/css/ctools.css?n48fl6");
@import url("../sites/all/modules/rate/rate.css?n48fl6");
@import url("../sites/all/modules/tagclouds/tagclouds.css?n48fl6");
@import url("../sites/all/modules/panels/css/panels.css?n48fl6");
@import url("../sites/all/modules/best_answer/best_answer.css?n48fl6");
@import url("../sites/all/modules/rate/templates/fivestar/fivestar.css?n48fl6");</style>
<style type="text/css" media="all">@import url("../files/color/garland-5ac73a91/style.css?n48fl6");</style>
<style type="text/css" media="print">@import url("../themes/garland/print.css?n48fl6");</style>

<!--[if lt IE 7]>
<link type="text/css" rel="stylesheet" href="http://registry.gimp.org/themes/garland/fix-ie.css?n48fl6" media="all" />
<![endif]-->
  <script type="text/javascript" src="../misc/jquery.js?v=1.4.4"></script>
<script type="text/javascript" src="../misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="../misc/drupal.js?n48fl6"></script>
<script type="text/javascript" src="../sites/all/modules/rate/rate.js?n48fl6"></script>
<script type="text/javascript" src="../sites/all/modules/rate/templates/fivestar/fivestar.js?n48fl6"></script>
<script type="text/javascript" src="../misc/tableheader.js?n48fl6"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"garland","theme_token":"e0dFE1WJsTOOzpp7_d0j0wcLKi9xjZ5rh0RRTkEJhEo","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/rate\/rate.js":1,"sites\/all\/modules\/rate\/templates\/fivestar\/fivestar.js":1,"misc\/tableheader.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"sites\/all\/modules\/date\/date_api\/date.css":1,"sites\/all\/modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"sites\/all\/modules\/date\/date_repeat_field\/date_repeat_field.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/mollom\/mollom.css":1,"modules\/node\/node.css":1,"modules\/poll\/poll.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"modules\/forum\/forum.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/rate\/rate.css":1,"sites\/all\/modules\/tagclouds\/tagclouds.css":1,"sites\/all\/modules\/panels\/css\/panels.css":1,"sites\/all\/modules\/best_answer\/best_answer.css":1,"sites\/all\/modules\/rate\/templates\/fivestar\/fivestar.css":1,"themes\/garland\/style.css":1,"themes\/garland\/print.css":1,"themes\/garland\/fix-ie.css":1}},"rate":{"basePath":"\/rate\/vote\/js","destination":"node\/1348"}});
//--><!]]>
</script>
</head>
<body class="html not-front not-logged-in two-sidebars page-node page-node- page-node-1348 node-type-scriptfu fluid-width" >
  <div id="skip-link">
    <a href="1348#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
      
  <div id="wrapper">
    <div id="container" class="clearfix">

      <div id="header">
        <div id="logo-floater">
                              <div id="branding"><strong><a href="../index.html">
                          <img src="../files/logo.png" alt="GIMP Plugin Registry " title="GIMP Plugin Registry " id="logo" />
                        <span>GIMP Plugin Registry</span>            </a></strong></div>
                          </div>

        <h2 class="element-invisible">Main menu</h2><ul class="links inline main-menu"><li class="menu-100 first"><a href="../about" title="Information about the Registry">About</a></li>
<li class="menu-136"><a href="23851" title="Documentation and How-Tos">Documentation</a></li>
<li class="menu-88"><a href="../forum">Forums</a></li>
<li class="menu-74"><a href="http://gug.criticalhit.dk" title="The GIMP User Group">GIMP User Group</a></li>
<li class="menu-1142"><a href="25574" title="GIMP Help">Get Help</a></li>
<li class="menu-1256"><a href="26216" title="Get info on using RSS to stay updated about what&#039;s going on on the site.">Stay Updated!</a></li>
<li class="menu-73 last"><a href="http://www.gimp.org/" title="The GIMP Homepage">gimp.org</a></li>
</ul>              </div> <!-- /#header -->

              <div id="sidebar-first" class="sidebar">
            <div class="region region-sidebar-first">
    <div id="block-system-navigation" class="block block-system block-menu clearfix">

    <h2 class="title">Navigation</h2>
  
  <div class="content">
    <ul class="menu"><li class="first leaf"><a href="25574" title="FAQ &amp; How To&#039;s">FAQ &amp; How To&#039;s</a></li>
<li class="leaf"><a href="../glossary.1" title="">Content By Name</a></li>
<li class="collapsed"><a href="../aggregator">Feed aggregator</a></li>
<li class="leaf"><a href="../popular">Popular content</a></li>
<li class="leaf"><a href="25392" title="Report Spam Here">Report Spam Here</a></li>
<li class="last leaf"><a href="../tagclouds">Tags</a></li>
</ul>  </div>
</div>
<div id="block-block-1" class="block block-block clearfix">

    
  <div class="content">
    If you'd like to upload plug-ins, please create an account below. You do <em>not</em> need one for download. Enjoy :-)  </div>
</div>
<div id="block-user-login" class="block block-user clearfix">

    <h2 class="title">User login</h2>
  
  <div class="content">
    <form action="http://registry.gimp.org/node/1348?destination=node/1348" method="post" id="user-login-form" accept-charset="UTF-8"><div><div class="form-item form-type-textfield form-item-name">
  <label for="edit-name">Username <span class="form-required" title="This field is required.">*</span></label>
 <input type="text" id="edit-name" name="name" value="" size="15" maxlength="60" class="form-text required" />
</div>
<div class="form-item form-type-password form-item-pass">
  <label for="edit-pass">Password <span class="form-required" title="This field is required.">*</span></label>
 <input type="password" id="edit-pass" name="pass" size="15" maxlength="128" class="form-text required" />
</div>
<div class="item-list"><ul><li class="first last"><a href="../user/password" title="Request new password via e-mail.">Request new password</a></li>
</ul></div><input type="hidden" name="form_build_id" value="form-8hTBEuehNLDERi57gX-IN0P7gXkWqpirjR19Nm5BmOU" />
<input type="hidden" name="form_id" value="user_login_block" />
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Log in" class="form-submit" /></div></div></form>  </div>
</div>
<div id="block-node-syndicate" class="block block-node clearfix">

    <h2 class="title">Syndicate</h2>
  
  <div class="content">
    <a href="../rss.xml" class="feed-icon" title="Subscribe to Syndicate"><img src="../misc/feed.png" width="16" height="16" alt="Subscribe to Syndicate" /></a>  </div>
</div>
  </div>
        </div>
      
      <div id="center"><div id="squeeze"><div class="right-corner"><div class="left-corner">
          <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="../index.html">Home</a></div>                    <a id="main-content"></a>
          <div id="tabs-wrapper" class="clearfix">                                <h1 class="with-tabs">vintage look</h1>
                              </div>                                                  <div class="clearfix">
              <div class="region region-content">
    <div id="block-system-main" class="block block-system clearfix">

    
  <div class="content">
    <div id="node-1348" class="node node-scriptfu node-promoted">

  
      
      <span class="submitted">March 3, 2008 - 17:17 — <span class="username">mm1</span></span>
  
  <div class="content clearfix">
    <div class="form-item form-type-item">
  <label>Rate </label>
 <div class="rate-widget-2 rate-widget clear-block rate-average rate-widget-fivestar rate-ec5cc153a886d709d3d2196bb3460d19 rate-node-1348-2-3" id="rate-node-1348-2-3"><div class="item-list"><ul><li class="first"><span class="rate-button rate-fivestar-btn-empty rate-fivestar-1" id="rate-button-1">1</span></li>
<li><span class="rate-button rate-fivestar-btn-empty rate-fivestar-2" id="rate-button-2">2</span></li>
<li><span class="rate-button rate-fivestar-btn-empty rate-fivestar-3" id="rate-button-3">3</span></li>
<li><span class="rate-button rate-fivestar-btn-empty rate-fivestar-4" id="rate-button-4">4</span></li>
<li class="last"><span class="rate-button rate-fivestar-btn-empty rate-fivestar-5" id="rate-button-5">5</span></li>
</ul></div><div class="rate-info">Total votes: 0</div><div class="rate-description">Rate this item!</div></div>
</div>
<div class="field field-name-upload field-type-file field-label-hidden"><div class="field-items"><div class="field-item even"><table class="sticky-enabled">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><span class="file"><img class="file-icon" alt="" title="text/plain" src="../modules/file/icons/text-plain.png" /> <a href="../files/vintage-look.scm" type="text/plain; length=2615" title="vintage-look.scm">vintage-look_0.1.scm</a></span></td><td>2.55 KB</td> </tr>
 <tr class="even"><td><span class="file"><img class="file-icon" alt="" title="application/octet-stream" src="../modules/file/icons/application-octet-stream.png" /> <a href="../files/vintage-look_0.scm" type="application/octet-stream; length=4691" title="vintage-look.scm">vintage-look.0.2.scm</a></span></td><td>4.58 KB</td> </tr>
 <tr class="odd"><td><span class="file"><img class="file-icon" alt="" title="application/octet-stream" src="../modules/file/icons/application-octet-stream.png" /> <a href="../files/mm1-vintage-look.0.3_0.scm" type="application/octet-stream; length=4277" title="mm1-vintage-look.0.3.scm">mm1-vintage-look.0.3.scm</a></span></td><td>4.18 KB</td> </tr>
</tbody>
</table>
</div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>
This script-fu for The Gimp is a attempt to simulate a vintage look.<br />
For Examples see <a href="http://www.mmip.net/articles/2-gimp-script-vintage-look">http://www.mmip.net/articles/2-gimp-script-vintage-look</a>
</p>
<p>
This Script is based on the deviantart tutorial from CrazyMurdock1 (Vintage look in Gimp)<br />
Optional sharpness and contrast layer
</p>
<p>
Version 0.2 - Optional sharpness and contrast layer<br />
thanks to elsamuko (<a href="http://sites.google.com/site/elsamuko/gimp">http://sites.google.com/site/elsamuko/gimp</a>)
</p>
<p>
Version 0.3 - Move to Filters -&gt; Artistic,  changes in Bleach Bypass
</p>
</div></div></div><div class="field field-name-taxonomy-vocabulary-7 field-type-taxonomy-term-reference field-label-inline clearfix"><div class="field-label">Code License:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="../taxonomy/term/43">GPLv2+</a></div><div class="field-item odd"><a href="../taxonomy/term/49">GPL</a></div></div></div><div class="field field-name-taxonomy-vocabulary-5 field-type-taxonomy-term-reference field-label-inline clearfix"><div class="field-label">Tags:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="../taxonomy/term/51">layer</a></div><div class="field-item odd"><a href="../taxonomy/term/157">photo</a></div><div class="field-item even"><a href="../taxonomy/term/273">vintage</a></div></div></div><div class="field field-name-taxonomy-vocabulary-1 field-type-taxonomy-term-reference field-label-inline clearfix"><div class="field-label">GIMP Version:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="../taxonomy/term/25">2.4</a></div><div class="field-item odd"><a href="../taxonomy/term/523">2.6</a></div></div></div><div class="field field-name-taxonomy-vocabulary-3 field-type-taxonomy-term-reference field-label-inline clearfix"><div class="field-label">Scripting Engine:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="../taxonomy/term/20">Script-Fu</a></div></div></div>  </div>

  <div class="clearfix">
          <div class="links"><ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>
    
    <div id="comments" class="comment-wrapper">
  
          <h2 class="title">Comments</h2>
      
  <a id="comment-12073"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">June 22, 2011 - 23:11 — <span class="username">erumore89</span></span>

  
  
        <h3><a href="../comment/12073#comment-12073" class="permalink" rel="bookmark">ok i am new to using actions</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>ok i am new to using actions and for the life of me I can't figure out how to "download" these so i can use them in GIMP someone please help lol</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-12075"></a>
<div class="comment even">

  <div class="clearfix">

    <span class="submitted">June 22, 2011 - 23:23 — <span class="username">mahvin</span></span>

  
  
        <h3><a href="../comment/12075#comment-12075" class="permalink" rel="bookmark">Right click the link</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>Right click the link and then save Link as, browse to your .gimp-2.6/scripts folder and save.</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>
</div><a id="comment-8588"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">June 29, 2010 - 08:43 — <span class="username">elizabethdonoghue</span></span>

  
  
        <h3><a href="../comment/8588#comment-8588" class="permalink" rel="bookmark">love it!</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>thanks - I've been using it a lot!</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>
<a id="comment-7769"></a>
<div class="comment even">

  <div class="clearfix">

    <span class="submitted">April 20, 2010 - 16:31 — <span class="username">iljuchin</span></span>

  
  
        <h3><a href="../comment/7769#comment-7769" class="permalink" rel="bookmark">Batch call of this script</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>Hello, I'm running my own script by command:<br />
gimp --console-messages --no-data --no-interface -b '(once-vintage-look "test.jpg")' -b '(gimp-quit 0)'</p>
<p>and receive this message:<br />
batch command: executed successfully.</p>
<p>but image has only new time stamp, but not edited. Please help me with batch processing of my images using this script. Thanks. </p>
<p>This is my own script:<br />
(define (once-vintage-look filename)<br />
	(let*<br />
		((image(car(gimp-file-load RUN-NONINTERACTIVE filename filename)))<br />
		(drawable (car (gimp-image-get-active-layer image)))<br />
		(mm1-vintage-look RUN-NONINTERACTIVE image drawable 17 20 59 TRUE)<br />
	)<br />
		(gimp-file-save RUN-NONINTERACTIVE image drawable filename filename)<br />
		(gimp-image-delete image)<br />
	)<br />
)</p>
<p>Regards<br />
Ilja</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-7776"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">April 21, 2010 - 00:32 — <span class="username">elsamuko</span></span>

  
  
        <h3><a href="../comment/7776#comment-7776" class="permalink" rel="bookmark">Merge before save</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>You need to merge the layers before saving, else only the original layer will be saved.<br />
Add these lines to the end of the script:<br />
)<br />
(gimp-image-merge-visible-layers image EXPAND-AS-NECESSARY)<br />
(set! drawable (car (gimp-image-get-active-drawable image)))<br />
(gimp-file-save RUN-NONINTERACTIVE image drawable filename filename)<br />
(gimp-image-delete img)<br />
)<br />
)</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-8815"></a>
<div class="comment even">

  <div class="clearfix">

    <span class="submitted">July 14, 2010 - 15:42 — <span class="username">bootchk</span></span>

  
  
        <h3><a href="../comment/8815#comment-8815" class="permalink" rel="bookmark">gimp_file_save() is tricky about saving all layers</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>I will expound, since this has bitten me also.</p>
<p>gimp_file_save() saves a *drawable* not an *image*.    You might expect it to save all layers (drawables) of the image, but it doesn't always.  Exactly what parts and what format it saves depends on the extension (suffix) of the filename parameter.  (If the extension is .xcf would it save all layers of the image??  I haven't tried that.  If another format supports layers, like .xcf does, would it save all layers?)  In other words, the image parameter is not used, since the drawable knows which image it is part of.</p>
<p>I have tried a call to gimp_file_save(aimage, adrawable,... ) where adrawable did not even belong to aimage, and it works, saving the drawable, without throwing an exception.</p>
<p>The Gimp Library documentation is not clear about this.</p>
<p>An aside, a followup about gimp_display_new():<br />
See other parts of this thread.<br />
The following code does work to keep a Python plugin from aborting if called NONINTERACTIVE with a call to gimp_display_new()</p>
<p>  # Show the new image<br />
  try :<br />
    gimp.Display(new_image)<br />
    pdb.gimp_displays_flush()<br />
  except gimp.error:<br />
    pass  # If runmode is NONINTERACTIVE, expect gimp_display_new() to fail</p>
<p>Another aside, about scripts returning values:<br />
Scheme plugin scripts don't have return values.  If a Scheme script creates a new image, there is no easy way to pass the new image to subsequent scripts (say in a larger script, or a batch command)???<br />
In a Python plugin, you can declare  return values in the registration call e.g. :</p>
<p>....[(PF_IMAGE, "new_image", "New image.")], ....</p>
<p>and return them:</p>
<p>return new_image</p>
<p>Or for example you can return a drawable that the plugin has created.  </p>
<p>It doesn't seem like many plugins are returning values, somewhat limiting their use as NONINTERACTIVE commands.</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>
</div><a id="comment-7772"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">April 20, 2010 - 18:45 — <span class="username">saulgoode</span></span>

  
  
        <h3><a href="../comment/7772#comment-7772" class="permalink" rel="bookmark">Don&#039;t specify the run mode</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>When a Script-fu script calls another Script-fu procedure, you should not specify a 'run-mode'. So the short answer is to remove the "RUN-NONINTERACTIVE" from the following line of your code.</p>
<pre>(mm1-vintage-look RUN-NONINTERACTIVE image drawable 17 20 59 TRUE)</pre><p>
Going a little deeper, creating a Script-fu script typically entails two parts: 1) providing the Scheme definition for the function, and 2) registering the function with GIMP's Procedural DataBase. </p>
<p>PDB registration makes the script available to plug-ins and allows for the function to be added to GIMP's menus -- but PDB registration is not actually needed in order to make the function available within Script-fu (the function becomes available within Script-fu when it is defined). </p>
<p>Even though a function such as 'mm1-vintage-look' is registered with the PDB, within Script-fu the function appears as just a normal Scheme definition. When the function is invoked within Script-fu, the PDB interface is ignored and there is no need to specify a run-mode. (When plug-ins invoke the function, they do so through the PDB and the plug-in specifies a run-mode to the Script-fu interpreter.)</p>
<p>The reason that no error was generated when you ran your batch is owing to happenstance in the values used for 'image' and 'drawable' identification. When you first open GIMP both image and drawable IDs get uniquely defined starting at "1" and increasing. In addition, the constant RUN-NONINTERACTIVE is pre-defined as "1" (RUN-INTERACTIVE is "0").</p>
<p>Therefore, when you invoke 'mm1-vintage-look'<br />
with the arguments:</p>
<pre>RUN-NONINTERACTIVE image drawable 17 20 59 TRUE</pre><p>
the arguments passed to the function are:</p>
<pre>1 1 2 17 20 59 TRUE</pre><p>
of which the first two arguments ("1 1") are treated as the image and drawable respectively. While the first (only) layer in your newly-opened image has an ID of "2", there is indeed a "drawable" that has an ID of "1" -- i.e., the image's selection. </p>
<p>The net effect is that your batch process is running the Vintage filter on the selection (with CMY values of [2 17 20]), but the layer itself is unchanged.</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-8318"></a>
<div class="comment even">

  <div class="clearfix">

    <span class="submitted">June 2, 2010 - 17:43 — <span class="username">bootchk</span></span>

  
  
        <h3><a href="../comment/8318#comment-8318" class="permalink" rel="bookmark">batch run-mode scheme python calling scripts from scripts</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>You can pass run-mode to another script by calling (gimp-proc-db-call...) instead of the script itself.</p>
<p>I can't find any way to determine the run-mode in a Scheme script?  So how can you avoid calls that require interaction such as gimp-display-new() ?</p>
<p>Its different in Python plugins: run_mode is an optional keyword parameter that you can pass and refer to.  It is still hidden from view most of the time, but its there if you need it.  Also, a call to another plugin DOES go through the PDB, and since you can't import another plugin, you can't call it directly.</p>
<p>The way run-mode and inter plugin calls are implemented IS very confusing and not consistent among C, Scheme, and Python plugins.</p>
<p>(I had a longer post but the spam filter prevented it.)</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-8319"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">June 2, 2010 - 20:14 — <span class="username">saulgoode</span></span>

  
  
        <h3><a href="../comment/8319#comment-8319" class="permalink" rel="bookmark">&gt; I can&#039;t find any way to</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>&gt; I can't find any way to determine the run-mode in a Scheme script? </p>
<p>By the time your Script-fu code starts executing, all interaction has already completed (if the script was run interactively, the dialog appeared, the user changed the settings, the dialog was closed, and your script called with the chosen values). As far as your script is concerned, it is running non-interactively. </p>
<p>&gt; So how can you avoid calls that require interaction such as gimp-display-new() ?</p>
<p>I don't know if that can be done (I've encountered this problem before when running scripts from the console). Will investigate. To my knowledge, 'gimp-display-new' is the only PDB function which is problematic in this sense.</p>
<p>If you want to run a plug-in (which accepts a run-mode) interactively then the best way to do so is to pass the SF-RUN-MODE "constant" to the plug-in: "(plug-in-gauss SF-RUN-MODE image drawable 5 5 RLE)". </p>
<p>What SF-RUN-MODE does is pass the run-mode with which your script was initially invoked to the plug-in. The reason using SF-RUN-MODE is better than using RUN-INTERACTIVE is because your script can then be used non-interactively (by other scripts or plug-ins).</p>
<p>EDIT: combining the above two concepts, a plug-in could be written which only accepts 'run-mode' and only opens a new display if it is called interactively. This is something of an abuse of the 'run-mode' argument but maybe if the plug-in and its argument were named properly this wouldn't be a problem. </p>
<p>Plug-in's RUN function (incomplete):</p>
<pre>run (const gchar      *name,
           gint              nparams,
           const GimpParam  *param,
           gint             *nreturn_vals,
           GimpParam       **return_vals)
      {
        GimpRunMode       run_mode;
        run_mode = param[0].data.d_int32;

        if (run_mode != GIMP_RUN_NONINTERACTIVE)
          gimp_display_new();
          
          /* return a status */
          ... </pre><p>
Script-fu invocation (assuming the plug-in is registered as 'safe_display_new'):</p>
<pre>(safe-display-new SF-RUN-MODE)</pre></div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-8330"></a>
<div class="comment even">

  <div class="clearfix">

    <span class="submitted">June 3, 2010 - 14:28 — <span class="username">bootchk</span></span>

  
  
        <h3><a href="../comment/8330#comment-8330" class="permalink" rel="bookmark">SF-RUN-MODE</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>I accept your explanation that Script-fu does all the user interaction (if there is any) before the script main() runs.</p>
<p>What I am doing is calling a Scheme script from another Python script and explicitly passing run_mode = RUN_NONINTERACTIVE.  And a call in the Scheme script to gimp_display_new() fails.  In that case, the script IS running noninteractive, hence impossible to new display.</p>
<p>I think this is another case where the punishment doesn't fit the crime: gimp_display_new should return success in this case and NOT abort the script.  One way of looking at it is: if the script is running non-interactively, then gimp_display_new creates a None display.  Maybe that can't be done because you can't pass a None display to any other Gimp procedures that take a display?</p>
<p>&gt; pass the SF-RUN-MODE "constant" to the plug-in: "(plug-in-gauss SF-RUN-MODE image drawable 5 5 RLE)"</p>
<p>That is interesting because the earlier discussion said you CAN'T pass a run_mode parameter to a script!!  Now you seem to say there is a magical "constant" that you CAN pass to a script.  You quote "constant" because it has a different value depending on the current run-mode (so it's not constant in the sense of always having the same value.)  Why wouldn't SF-RUN-MODE be taken as the image parameter, as explained earlier?  It seems like more magic.</p>
<p>And if SF-RUN-MODE is a pseudo-constant, can you use:<br />
(equals SF-RUN-MODE RUN-NONINTERACTIVE)<br />
to determine the current run mode?  (I should test that myself.)</p>
<p>To be clear, you are suggesting that someone should write a C plugin, that you call safe-display-new that returns True if the current run mode is RUN_INTERACTIVE .<br />
Then, in a scheme script, if you want to avoid calling gimp-display-new if the run-mode is interactive (sorry, I am not fluent in Scheme):</p>
<p>if (safe-display-new SF-RUN-MODE) :	# if RUN_INTERACTIVE<br />
   gimp-display-new()</p>
<p>A web search reveals that SF-RUN-MODE is fairly new (2007) and seems rather undocumented.</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="../user/login?destination=comment%252Freply%252F1348%2523comment-form">Log in</a> to post comments</span></li>
</ul></div>
</div></div></div></div><h2 class="element-invisible">Pages</h2><div class="item-list"><ul class="pager"><li class="pager-current first">1</li>
<li class="pager-item"><a title="Go to page 2" href="1348?page=1">2</a></li>
<li class="pager-next"><a title="Go to next page" href="1348?page=1">next ›</a></li>
<li class="pager-last last"><a title="Go to last page" href="1348?page=1">last »</a></li>
</ul></div>
        </div>
  </div>

</div>
  </div>
</div>
  </div>
          </div>
          <a href="../crss/node/1348" class="feed-icon" title="Subscribe to Comments for &quot;vintage look&quot;"><img src="../misc/feed.png" width="16" height="16" alt="Subscribe to Comments for &quot;vintage look&quot;" /></a>            <div class="region region-footer">
    <div id="block-block-5" class="block block-block clearfix">

    
  <div class="content">
    Unless otherwise noted, the rights for the individual plugins are with their respective authors. Logo image by Jakub Steiner.
<marquee style="width: 0px; position: absolute"> <a href="http://brazzersdeporno.com" title="porno">porno</a> - <a href="http://www.porno724.com/" target="_blank" title="Porno izle">Porno izle</a> <a href="http://www.yokyokpornolar.com/" target="_blank" title="porno abi">porno abi</a> </marquee>  </div>
</div>
  </div>
      </div></div></div></div> <!-- /.left-corner, /.right-corner, /#squeeze, /#center -->

              <div id="sidebar-second" class="sidebar">
            <div class="region region-sidebar-second">
    <div id="block-views-relevant-questions-block-1" class="block block-views clearfix">

    <h2 class="title">Questions</h2>
  
  <div class="content">
    <div class="view view-relevant-questions view-id-relevant_questions view-display-id-block_1 view-dom-id-faa4100591b1444e94e51fa816826c54">
        
  
  
      <div class="view-empty">
      <p><em>No questions yet ... </em></p>
    </div>
  
  
  
  
  
  
</div>  </div>
</div>
<div id="block-search-form" class="block block-search clearfix">

    
  <div class="content">
    <form action="1348" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
      <h2 class="element-invisible">Search form</h2>
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions--2"><input type="submit" id="edit-submit--2" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-lEpZ4abBbPRHrXv8semEZLsYCHNIP-u-nJCg9uokSHw" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
</div>
<div id="block-forum-active" class="block block-forum clearfix">

    <h2 class="title">Active forum topics</h2>
  
  <div class="content">
    <div class="item-list"><ul><li class="first"><a href="32356" title="3 comments">Can&#039;t access &quot;My account&quot;</a></li>
<li><a href="32371">Delete account</a></li>
<li class="last"><a href="32363">Outline</a></li>
</ul></div><div class="more-link"><a href="../forum" title="Read the latest forum topics.">More</a></div>  </div>
</div>
<div id="block-views-newest-questions-block-1" class="block block-views clearfix">

    <h2 class="title">Updated Questions</h2>
  
  <div class="content">
    <div class="view view-newest-questions view-id-newest_questions view-display-id-block_1 view-dom-id-00b46974db22a88e843af96652f731d3">
        
  
  
      <div class="view-content">
      <div class="item-list">    <ul>          <li class="views-row views-row-1 views-row-odd views-row-first">  
  <span class="views-field views-field-title">        <span class="field-content"><a href="32373">Shadow and Highlights Recovery - Adding group undo</a></span>  </span>  
  <div class="views-field views-field-last-updated">    <span class="views-label views-label-last-updated">Last change</span>    <span class="field-content">3 hours 24 min</span>  </div>  
  <div class="views-field views-field-field-answer-count">        <div class="field-content">No answers, yet!</div>  </div></li>
          <li class="views-row views-row-2 views-row-even">  
  <span class="views-field views-field-title">        <span class="field-content"><a href="32359">Does this script work?</a></span>  </span>  
  <div class="views-field views-field-last-updated">    <span class="views-label views-label-last-updated">Last change</span>    <span class="field-content">4 months 2 weeks</span>  </div>  
  <div class="views-field views-field-field-answer-count">        <div class="field-content">No answers, yet!</div>  </div></li>
          <li class="views-row views-row-3 views-row-odd views-row-last">  
  <span class="views-field views-field-title">        <span class="field-content"><a href="32349">File upload problem</a></span>  </span>  
  <div class="views-field views-field-last-updated">    <span class="views-label views-label-last-updated">Last change</span>    <span class="field-content">6 months 37 min</span>  </div>  
  <div class="views-field views-field-field-answer-count">        <div class="field-content">1 Answer(s)</div>  </div></li>
      </ul></div>    </div>
  
  
  
      
<div class="more-link">
  <a href="../newest-questions">
    more  </a>
</div>
  
  
  
</div>  </div>
</div>
<div id="block-comment-recent" class="block block-comment clearfix">

    <h2 class="title">Recent comments</h2>
  
  <div class="content">
    <div class="item-list"><ul><li class="first"><a href="../comment/19262#comment-19262">Black triangles</a>&nbsp;<span>2 hours 31 min ago</span></li>
<li><a href="../comment/19261#comment-19261">I use the Python version of</a>&nbsp;<span>4 days 4 hours ago</span></li>
<li class="last"><a href="../comment/19260#comment-19260">I have the same problem too</a>&nbsp;<span>1 week 2 days ago</span></li>
</ul></div>  </div>
</div>
<div id="block-node-recent" class="block block-node clearfix">

    <h2 class="title">Recent content</h2>
  
  <div class="content">
    <table>
<tbody>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="32373">Shadow and Highlights Recovery - Adding group undo</a></div><div class="node-author"><span class="username">programmer_ceds</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="32360">GIMP Plugin Registry in Lockdown mode</a></div><div class="node-author"><span class="username">schumaml</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="32372">Split to Special PNG&#039;s</a></div><div class="node-author"><span class="username">Efenstor</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="32371">Delete account</a></div><div class="node-author"><span class="username">amarz82</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="32370">Export with MozJPEG</a></div><div class="node-author"><span class="username">Efenstor</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="32369">Shadow and Highlights Recovery</a></div><div class="node-author"><span class="username">erwinsoo</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="27656">GIMP Extensions Pack for Windows</a></div><div class="node-author"><span class="username">GIMP Extensions</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="32341">Removed...</a></div><div class="node-author"><span class="username">Le Gnou</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="32368">ofn-preset-guides</a></div><div class="node-author"><span class="username">Ofnuts</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="28268">Export Layers</a></div><div class="node-author"><span class="username">khalim19</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
</tbody>
</table>
  </div>
</div>
  </div>
        </div>
      
    </div> <!-- /#container -->
  </div> <!-- /#wrapper -->
  </body>
</html>
