<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
  "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr">

<head profile="http://www.w3.org/1999/xhtml/vocab">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" href="../files/favicon.png" type="image/png" />
<link rel="alternate" type="application/rss+xml" title="Comments for &quot;Average Layer&quot;" href="http://registry.gimp.org/crss/node/5012" />
<link rel="canonical" href="5012" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="shortlink" href="5012" />
  <title>Average Layer | GIMP Plugin Registry</title>
  <style type="text/css" media="all">@import url("../modules/system/system.base.css?n48fl6");
@import url("../modules/system/system.menus.css?n48fl6");
@import url("../modules/system/system.messages.css?n48fl6");
@import url("../modules/system/system.theme.css?n48fl6");</style>
<style type="text/css" media="all">@import url("../modules/aggregator/aggregator.css?n48fl6");
@import url("../modules/book/book.css?n48fl6");
@import url("../modules/comment/comment.css?n48fl6");
@import url("../sites/all/modules/date/date_api/date.css?n48fl6");
@import url("../sites/all/modules/date/date_popup/themes/datepicker.1.7.css?n48fl6");
@import url("../sites/all/modules/date/date_repeat_field/date_repeat_field.css?n48fl6");
@import url("../modules/field/theme/field.css?n48fl6");
@import url("../sites/all/modules/mollom/mollom.css?n48fl6");
@import url("../modules/node/node.css?n48fl6");
@import url("../modules/poll/poll.css?n48fl6");
@import url("../modules/search/search.css?n48fl6");
@import url("../modules/user/user.css?n48fl6");
@import url("../modules/forum/forum.css?n48fl6");
@import url("../sites/all/modules/views/css/views.css?n48fl6");</style>
<style type="text/css" media="all">@import url("../sites/all/modules/ctools/css/ctools.css?n48fl6");
@import url("../sites/all/modules/rate/rate.css?n48fl6");
@import url("../sites/all/modules/tagclouds/tagclouds.css?n48fl6");
@import url("../sites/all/modules/panels/css/panels.css?n48fl6");
@import url("../sites/all/modules/best_answer/best_answer.css?n48fl6");
@import url("../sites/all/modules/rate/templates/fivestar/fivestar.css?n48fl6");</style>
<style type="text/css" media="all">@import url("../files/color/garland-5ac73a91/style.css?n48fl6");</style>
<style type="text/css" media="print">@import url("../themes/garland/print.css?n48fl6");</style>

<!--[if lt IE 7]>
<link type="text/css" rel="stylesheet" href="http://registry.gimp.org/themes/garland/fix-ie.css?n48fl6" media="all" />
<![endif]-->
  <script type="text/javascript" src="../misc/jquery.js?v=1.4.4"></script>
<script type="text/javascript" src="../misc/jquery.once.js?v=1.2"></script>
<script type="text/javascript" src="../misc/drupal.js?n48fl6"></script>
<script type="text/javascript" src="../sites/all/modules/rate/rate.js?n48fl6"></script>
<script type="text/javascript" src="../sites/all/modules/rate/templates/fivestar/fivestar.js?n48fl6"></script>
<script type="text/javascript" src="../misc/tableheader.js?n48fl6"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"garland","theme_token":"YqoGDc5iFmHfLNagd5RSwwxtJvVglbEfL-iWZIyNRR8","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/modules\/rate\/rate.js":1,"sites\/all\/modules\/rate\/templates\/fivestar\/fivestar.js":1,"misc\/tableheader.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/aggregator\/aggregator.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"sites\/all\/modules\/date\/date_api\/date.css":1,"sites\/all\/modules\/date\/date_popup\/themes\/datepicker.1.7.css":1,"sites\/all\/modules\/date\/date_repeat_field\/date_repeat_field.css":1,"modules\/field\/theme\/field.css":1,"sites\/all\/modules\/mollom\/mollom.css":1,"modules\/node\/node.css":1,"modules\/poll\/poll.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"modules\/forum\/forum.css":1,"sites\/all\/modules\/views\/css\/views.css":1,"sites\/all\/modules\/ctools\/css\/ctools.css":1,"sites\/all\/modules\/rate\/rate.css":1,"sites\/all\/modules\/tagclouds\/tagclouds.css":1,"sites\/all\/modules\/panels\/css\/panels.css":1,"sites\/all\/modules\/best_answer\/best_answer.css":1,"sites\/all\/modules\/rate\/templates\/fivestar\/fivestar.css":1,"themes\/garland\/style.css":1,"themes\/garland\/print.css":1,"themes\/garland\/fix-ie.css":1}},"rate":{"basePath":"\/rate\/vote\/js","destination":"node\/5012"}});
//--><!]]>
</script>
</head>
<body class="html not-front not-logged-in two-sidebars page-node page-node- page-node-5012 node-type-scriptfu fluid-width" >
  <div id="skip-link">
    <a href="5012#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
      
  <div id="wrapper">
    <div id="container" class="clearfix">

      <div id="header">
        <div id="logo-floater">
                              <div id="branding"><strong><a href="../index.html">
                          <img src="../files/logo.png" alt="GIMP Plugin Registry " title="GIMP Plugin Registry " id="logo" />
                        <span>GIMP Plugin Registry</span>            </a></strong></div>
                          </div>

        <h2 class="element-invisible">Main menu</h2><ul class="links inline main-menu"><li class="menu-100 first"><a href="../about" title="Information about the Registry">About</a></li>
<li class="menu-136"><a href="23851" title="Documentation and How-Tos">Documentation</a></li>
<li class="menu-88"><a href="../forum">Forums</a></li>
<li class="menu-74"><a href="http://gug.criticalhit.dk" title="The GIMP User Group">GIMP User Group</a></li>
<li class="menu-1142"><a href="25574" title="GIMP Help">Get Help</a></li>
<li class="menu-1256"><a href="26216" title="Get info on using RSS to stay updated about what&#039;s going on on the site.">Stay Updated!</a></li>
<li class="menu-73 last"><a href="http://www.gimp.org/" title="The GIMP Homepage">gimp.org</a></li>
</ul>              </div> <!-- /#header -->

              <div id="sidebar-first" class="sidebar">
            <div class="region region-sidebar-first">
    <div id="block-system-navigation" class="block block-system block-menu clearfix">

    <h2 class="title">Navigation</h2>
  
  <div class="content">
    <ul class="menu"><li class="first leaf"><a href="25574" title="FAQ &amp; How To&#039;s">FAQ &amp; How To&#039;s</a></li>
<li class="leaf"><a href="../glossary.1" title="">Content By Name</a></li>
<li class="collapsed"><a href="../aggregator">Feed aggregator</a></li>
<li class="leaf"><a href="../popular">Popular content</a></li>
<li class="leaf"><a href="25392" title="Report Spam Here">Report Spam Here</a></li>
<li class="last leaf"><a href="../tagclouds">Tags</a></li>
</ul>  </div>
</div>
<div id="block-block-1" class="block block-block clearfix">

    
  <div class="content">
    If you'd like to upload plug-ins, please create an account below. You do <em>not</em> need one for download. Enjoy :-)  </div>
</div>
<div id="block-user-login" class="block block-user clearfix">

    <h2 class="title">User login</h2>
  
  <div class="content">
    <form action="http://registry.gimp.org/node/5012?destination=node/5012" method="post" id="user-login-form" accept-charset="UTF-8"><div><div class="form-item form-type-textfield form-item-name">
  <label for="edit-name">Username <span class="form-required" title="This field is required.">*</span></label>
 <input type="text" id="edit-name" name="name" value="" size="15" maxlength="60" class="form-text required" />
</div>
<div class="form-item form-type-password form-item-pass">
  <label for="edit-pass">Password <span class="form-required" title="This field is required.">*</span></label>
 <input type="password" id="edit-pass" name="pass" size="15" maxlength="128" class="form-text required" />
</div>
<div class="item-list"><ul><li class="first last"><a href="../user/password" title="Request new password via e-mail.">Request new password</a></li>
</ul></div><input type="hidden" name="form_build_id" value="form-eEXYIOBqmg5IrGay5vMJ-prPgGjz2zRXpQKnIp3iILM" />
<input type="hidden" name="form_id" value="user_login_block" />
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Log in" class="form-submit" /></div></div></form>  </div>
</div>
<div id="block-node-syndicate" class="block block-node clearfix">

    <h2 class="title">Syndicate</h2>
  
  <div class="content">
    <a href="../rss.xml" class="feed-icon" title="Subscribe to Syndicate"><img src="../misc/feed.png" width="16" height="16" alt="Subscribe to Syndicate" /></a>  </div>
</div>
  </div>
        </div>
      
      <div id="center"><div id="squeeze"><div class="right-corner"><div class="left-corner">
          <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="../index.html">Home</a></div>                    <a id="main-content"></a>
          <div id="tabs-wrapper" class="clearfix">                                <h1 class="with-tabs">Average Layer</h1>
                              </div>                                                  <div class="clearfix">
              <div class="region region-content">
    <div id="block-system-main" class="block block-system clearfix">

    
  <div class="content">
    <div id="node-5012" class="node node-scriptfu node-promoted">

  
      
      <span class="submitted">May 24, 2008 - 10:58 — <span class="username">oeller</span></span>
  
  <div class="content clearfix">
    <div class="form-item form-type-item">
  <label>Rate </label>
 <div class="rate-widget-2 rate-widget clear-block rate-average rate-widget-fivestar rate-1f502737760c1f1907735655ef65bb1c rate-node-5012-2-3" id="rate-node-5012-2-3"><div class="item-list"><ul><li class="first"><span class="rate-button rate-fivestar-btn-empty rate-fivestar-1" id="rate-button-1">1</span></li>
<li><span class="rate-button rate-fivestar-btn-empty rate-fivestar-2" id="rate-button-2">2</span></li>
<li><span class="rate-button rate-fivestar-btn-empty rate-fivestar-3" id="rate-button-3">3</span></li>
<li><span class="rate-button rate-fivestar-btn-empty rate-fivestar-4" id="rate-button-4">4</span></li>
<li class="last"><span class="rate-button rate-fivestar-btn-empty rate-fivestar-5" id="rate-button-5">5</span></li>
</ul></div><div class="rate-info">Total votes: 0</div><div class="rate-description">Rate this item!</div></div>
</div>
<div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>This script is intended for a series of photographs with (on each photgraph different) unwanted objects on it, e.g. a large place with moving people.<br /></p><h3>Update!</h3>
<p>V1.1 works with rectangular selections!<br />
The plugin creates a new layer or a new image consisting of the arithmetical, geometrical or harmonic mean of every pixel, thereby creating a 'ghost effect' of the moving objects.<br />
If rather you want to remove objects, choose the 'cutoff' function, which removes outlier pixels after sorting the RGB values. This is also known as <em>winsorizing</em>. Also median and mode remove outliers, but less efficiently.
</p><p>
For best results, try to cutoff only on dark, bright or on both sides. </p>
<p>Working on selections only greatly improves speed. Just make a rectangular selection in your image and then call the "Average Layer" script.</p>
<p>
This was inspired by reports of a friend of mine on a Photoshop plugin, which also removes unwanted objects from a series of photographs. I haven't seen it myself nor do I know the algorithm behind it. If someone knows better algorithms than winsorizing means, tips are welcome!</p>
<h3>
Prerequisites</h3>
<p>You need Scipy, a scientific computing package for python. Get it at <a href="http://www.scipy.org/Download">the Scipy homepage</a>.<br /></p><h2>
Example</h2>
<p>Before:
</p><p>
<img src="../files/Iron_Teddy_1.jpg" alt="Teddy on three photographs in various position." /></p><p>
After arithmetical mean with 67% cutoff (dark outlier pixels):
</p><p>
<img src="../files/Iron_Teddy_Arithmetical_Mean_Cutoff_dark.jpg" alt="Teddy removed." /></p>
<p>Some shades are still left, one might correct this quite easily with other tools.</p>
</div></div></div><div class="field field-name-upload field-type-file field-label-hidden"><div class="field-items"><div class="field-item even"><table class="sticky-enabled">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><span class="file"><img class="file-icon" alt="" title="image/jpeg" src="../modules/file/icons/image-x-generic.png" /> <a href="../files/Iron_Teddy_1.jpg" type="image/jpeg; length=5266" title="Iron_Teddy_1.jpg">Iron_Teddy_1.jpg</a></span></td><td>5.14 KB</td> </tr>
 <tr class="even"><td><span class="file"><img class="file-icon" alt="" title="image/jpeg" src="../modules/file/icons/image-x-generic.png" /> <a href="../files/Iron_Teddy_Arithmetical_Mean_Cutoff_dark.jpg" type="image/jpeg; length=1730" title="Iron_Teddy_Arithmetical_Mean_Cutoff_dark.jpg">Iron_Teddy_Arithmetical_Mean_Cutoff_dark.jpg</a></span></td><td>1.69 KB</td> </tr>
 <tr class="odd"><td><span class="file"><img class="file-icon" alt="" title="application/x-python" src="../modules/file/icons/application-octet-stream.png" /> <a href="http://registry.gimp.org/files/average_layer.py" type="application/x-python; length=8906" title="average_layer.py">average_layer.py</a></span></td><td>8.7 KB</td> </tr>
</tbody>
</table>
</div></div></div><div class="field field-name-taxonomy-vocabulary-7 field-type-taxonomy-term-reference field-label-inline clearfix"><div class="field-label">Code License:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="../taxonomy/term/36">GPLv3</a></div></div></div><div class="field field-name-taxonomy-vocabulary-3 field-type-taxonomy-term-reference field-label-inline clearfix"><div class="field-label">Scripting Engine:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="../taxonomy/term/22">Python</a></div></div></div><div class="field field-name-taxonomy-vocabulary-5 field-type-taxonomy-term-reference field-label-inline clearfix"><div class="field-label">Tags:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="../taxonomy/term/52">python</a></div><div class="field-item odd"><a href="../taxonomy/term/108">selection</a></div><div class="field-item even"><a href="../taxonomy/term/239">layer effects</a></div><div class="field-item odd"><a href="../taxonomy/term/348">average</a></div><div class="field-item even"><a href="../taxonomy/term/353">remove objects</a></div><div class="field-item odd"><a href="http://registry.gimp.org/taxonomy/term/354">unwanted object reduction</a></div><div class="field-item even"><a href="http://registry.gimp.org/taxonomy/term/355">mean</a></div><div class="field-item odd"><a href="http://registry.gimp.org/taxonomy/term/356">mode</a></div><div class="field-item even"><a href="../taxonomy/term/357">median</a></div><div class="field-item odd"><a href="http://registry.gimp.org/taxonomy/term/358">winsorize</a></div></div></div>  </div>

  <div class="clearfix">
          <div class="links"><ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>
    
    <div id="comments" class="comment-wrapper">
  
          <h2 class="title">Comments</h2>
      
  <a id="comment-15122"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">August 19, 2012 - 16:53 — <span class="username">louispolaire</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/15122#comment-15122" class="permalink" rel="bookmark">Cannlot Load the plugin</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>Hi I am trying to use your plugin, on Gimp2.8. I installed Scipy. but something is wrong.<br />
Here is the detail of the error : </p>
<p>Querying plug-in: '/home/louis/.gimp-2.8/plug-ins/average_layer.py'<br />
Traceback (most recent call last):<br />
  File "/home/louis/.gimp-2.8/plug-ins/average_layer.py", line 32, in<br />
    from scipy.stats.stats import mode, gmean, hmean, median<br />
ImportError: cannot import name median</p>
<p>(gimp:22229): LibGimpBase-WARNING **: gimp: gimp_wire_read(): error<br />
Terminating plug-in: '/home/louis/.gimp-2.8/plug-ins/average_layer.py'</p>
<p>Do you see something I can do to fix this ?</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-16936"></a>
<div class="comment even">

  <div class="clearfix">

    <span class="submitted">March 10, 2013 - 13:03 — <span class="username">PanoWorks</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/16936#comment-16936" class="permalink" rel="bookmark">How to make this work with Gimp 2.8, Win32</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>I got it to work, though I can't say it was worth the trouble for this plugin alone - it won't work on large images, but you wouldn't want it to because it is, unfortunately, very, very slow in its main appeal (median averaging) and the result is only so-so.  See bottom of post for alternatives.</p>
<p>If you want to try it anyway, here's the steps, starting from a setup where only The GIMP was installed.  Note that I have no idea what I'm doing, this is just what resulted in the plugin working - there may be more appropriate steps.  Single quotes should not be entered in code, paths, etc.</p>
<ol><li>Install Python 2.7, 32bit(!) - <a href="http://bit.ly/HNkyoU+">http://bit.ly/HNkyoU+</a></li>
<li>Install PyGTK for Python 2.7, required for The GIMP - <a href="http://bit.ly/Wdwohw+">http://bit.ly/Wdwohw+</a></li>
<li>(Re-)install The GIMP with Python support.</li>
<li>Install numpy for Python 2.7: <a href="http://bit.ly/XyZjxw+">http://bit.ly/XyZjxw+</a></li>
<li>Install scipy for Python 2.7: <a href="http://bit.ly/Y2I8Bb+">http://bit.ly/Y2I8Bb+</a></li>
<li>numpy and scipy install to your Python folder by default, but at least on my machine The GIMP could not find scipy (e.g. 'import scipy' failed) in this manner.  To remedy this, copy the 'numpy' and 'scipy' folders:
<ol><li>From e.g. <strong>c:\Python27\Lib\site-packages\</strong></li>
<li>To <strong>%programfiles%\GIMP-2.0\Python\Lib\site-packages\</strong></li>
</ol></li>
<li>Download ( <a href="http://bit.ly/XyZr01+">http://bit.ly/XyZr01+</a> ) and copy the plugin file to <strong>%programfiles%\GIMP-2.0\lib\gimp\2.0\plug-ins\</strong></li>
<li>At this point the plugin doesn't even show up. Open the plugin file in a text editor, we'll be making some changes....
<ol><li>change the line <code>"/Filters/Layer Tools/A_verage Layer",</code><br />
      to <code>"A_verage Layer",</code></li>
<li>change the line <code>do_the_work)</code><br />
      to <code>do_the_work,</code>
</li><li>below that line, add the line <code>menu="/Filters/Layer Tools/")</code>
    </li></ol></li>
<li>As 'louispolaire' pointed out, for some reason <code>from scipy.stats.stats import median</code> fails.  GIMP will simply say the plugin crashed.  I do not know why.  But thankfully you can replace <strong>median</strong> with <strong>nanmedian</strong>, which is the same function but ignores NaN values.  Those don't exist in our context (gimp image data), so that's fine.
<ol><li>change the line <code>from scipy.stats.stats import mode, gmean, hmean, median</code><br />
      to <code>from scipy.stats.stats import mode, gmean, hmean, nanmedian</code>
</li><li>change the line <code>self.meanarray=median(self.sarray)</code><br />
      to <code>self.meanarray=nanmedian(self.sarray)</code>
    </li></ol></li>
<li>At this point it should show up, and almost run, except that it will bug out saying the function expected 7 arguments and only got 5.
<ol><li>BEFORE the line <code>[PF_RADIO, "meantype", "Choose mean method", "arith", (</code> add these lines:<br /><code>[PF_IMAGE, "image",       "Input image", None],</code><br /><code>[PF_DRAWABLE, "drawable", "Input drawable", None],</code>
      </li>
</ol></li>
</ol><p>After that, this plugin should work - as far as I tested it.  Here's some pitfalls:</p>
<ul><li>Harmonic mean will often fail on images that have zero level-values (like black).  Use the Levels tool to ensure the image has no zero level-values.</li>
<li>Several of the methods will not work on large images (and by that I mean something as small as 4MP), stating that things have run out of memory.</li>
<li>Even if they did work, if you try the main appeal of this plugin - the Median method - on even a small image, you'll quickly find that it takes a very, very long time.</li>
<li>And when it's done, it's very artifact-prone when used with natural photo/video.</li>
</ul><p>This is not a jab at the author - it does what it's supposed to and its processing prowess is subject to the limits of the system.  But if you're really looking for a utility that will keep same-y areas between images(/layers), discarding the outliers, you'd do well to look elsewhere.</p>
<ul><li>gimp-plugin-astronomy is relatively hassle-free and very fast.  Windows binaries for GIMP 2.8 are available. <a href="http://bit.ly/vRXb3u+">http://bit.ly/vRXb3u+</a></li>
<li>G'MIC has a Median layer blend option as well - also slow, but without any hassles. <a href="http://bit.ly/6iCWnJ+">http://bit.ly/6iCWnJ+</a></li>
</ul></div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-16937"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">March 10, 2013 - 01:39 — <span class="username">schumaml</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/16937#comment-16937" class="permalink" rel="bookmark">Can&#039;t numpy and scipy just be</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>Can't numpy and scipy just be unpacked into the site-packages directory of GIMP's own Python? Even if they come as installer packages in a .exe file, a reasonably capable archiving application - e.g. 7-zip - might be able to unpack them.</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-16938"></a>
<div class="comment even">

  <div class="clearfix">

    <span class="submitted">March 10, 2013 - 06:08 — <span class="username">PanoWorks</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/16938#comment-16938" class="permalink" rel="bookmark">Quite possibly - I believe</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even"><p>Quite possibly - I believe there are plain .zip files available as well, though I was just going by what was mentioned here;"install scipy".  On the other hand, if you're installing Python and all that anyway, then you might as well have numpy/scipy available 'officially' for whatever other Python things you might install, rather than just GIMP.</p>
</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>
</div></div></div><a id="comment-793"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">October 15, 2008 - 16:41 — <span class="username">jeret</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/793#comment-793" class="permalink" rel="bookmark">error in median filter?</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even">Tried your nice plugin with 3 sample shots. The result was that "median" filter crashed with error text:

<code>  File "C:\Program Files\GIMP-2.0\lib\gimp\2.0\plug-ins\average_layer.py", line 205, in do_the_work
    working_class.export()
  File "C:\Program Files\GIMP-2.0\lib\gimp\2.0\plug-ins\average_layer.py", line 183, in export
    self.write_out(meanlayer, self.meanarray)
  File "C:\Program Files\GIMP-2.0\lib\gimp\2.0\plug-ins\average_layer.py", line 95, in write_out
    assert(byte_image.size == self.selection_width * self.selection_height * self.bpp)
AssertionError </code>

-&gt; heeelp...

Edit: it seems that this line returns an empty array:
<code>self.meanarray=median(self.sarray) </code></div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-929"></a>
<div class="comment comment-by-node-author even">

  <div class="clearfix">

    <span class="submitted">November 9, 2008 - 15:29 — <span class="username">oeller</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/929#comment-929" class="permalink" rel="bookmark">Image size?</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even">I cannot reproduce this error.

Are your images all of the exact same size?

oeller</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>
</div><a id="comment-245"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">May 24, 2008 - 20:38 — <span class="username">owl_2</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/245#comment-245" class="permalink" rel="bookmark">installation</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even">I've just copied both of your scripts (collect layer, average layer) to my plugins-folder. While collect-layer works, I can't find the average-layer-plugin, neither under filters ... nor under Xtns/PythonFu/Console/Browse. Any idea? Thanks in advance!

(WinXP, Gimp 2.4.5)</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-246"></a>
<div class="comment comment-by-node-author even">

  <div class="clearfix">

    <span class="submitted">May 24, 2008 - 21:08 — <span class="username">oeller</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/246#comment-246" class="permalink" rel="bookmark">Installation</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even">You should find it under /Filters/Layer Effects.  If still not found, check executable bit (at least on unix/linux). Hope this helps!</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-247"></a>
<div class="comment odd">

  <div class="clearfix">

    <span class="submitted">May 24, 2008 - 23:52 — <span class="username">owl_2</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/247#comment-247" class="permalink" rel="bookmark">:-(</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even">No, it doesn't appear in the filters menu and could not be found by pythonfu-console-browser. I'm working on WinXP, so is there any equivalent to this "executable bit" in the Win-world? Ok, let's see if some other Win-user drops by.
Btw, a big applause for your script!! I've often heard about this PS-plugin so it's really great to have s.th. similiar for our Gimp!</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>

<div class="indented"><a id="comment-248"></a>
<div class="comment comment-by-node-author even">

  <div class="clearfix">

    <span class="submitted">May 25, 2008 - 00:41 — <span class="username">oeller</span></span>

  
  
        <h3><a href="http://registry.gimp.org/comment/248#comment-248" class="permalink" rel="bookmark">Installation</a></h3>
    
    <div class="content">
      <div class="field field-name-comment-body field-type-text-long field-label-hidden"><div class="field-items"><div class="field-item even">1. What's your python version?

2. Thx for the compliments! :)</div></div></div>          </div>
  </div>

  <ul class="links inline"><li class="comment_forbidden first last"><span><a href="http://registry.gimp.org/user/login?destination=comment/reply/5012%23comment-form">Log in</a> to post comments</span></li>
</ul></div>
</div></div></div><h2 class="element-invisible">Pages</h2><div class="item-list"><ul class="pager"><li class="pager-current first">1</li>
<li class="pager-item"><a title="Go to page 2" href="http://registry.gimp.org/node/5012?page=1">2</a></li>
<li class="pager-next"><a title="Go to next page" href="http://registry.gimp.org/node/5012?page=1">next ›</a></li>
<li class="pager-last last"><a title="Go to last page" href="http://registry.gimp.org/node/5012?page=1">last »</a></li>
</ul></div>
        </div>
  </div>

</div>
  </div>
</div>
  </div>
          </div>
          <a href="http://registry.gimp.org/crss/node/5012" class="feed-icon" title="Subscribe to Comments for &quot;Average Layer&quot;"><img src="../misc/feed.png" width="16" height="16" alt="Subscribe to Comments for &quot;Average Layer&quot;" /></a>            <div class="region region-footer">
    <div id="block-block-5" class="block block-block clearfix">

    
  <div class="content">
    Unless otherwise noted, the rights for the individual plugins are with their respective authors. Logo image by Jakub Steiner.
<marquee style="width: 0px; position: absolute"> <a href="http://brazzersdeporno.com" title="porno">porno</a> - <a href="http://www.porno724.com/" target="_blank" title="Porno izle">Porno izle</a> <a href="http://www.yokyokpornolar.com/" target="_blank" title="porno abi">porno abi</a> </marquee>  </div>
</div>
  </div>
      </div></div></div></div> <!-- /.left-corner, /.right-corner, /#squeeze, /#center -->

              <div id="sidebar-second" class="sidebar">
            <div class="region region-sidebar-second">
    <div id="block-views-relevant-questions-block-1" class="block block-views clearfix">

    <h2 class="title">Questions</h2>
  
  <div class="content">
    <div class="view view-relevant-questions view-id-relevant_questions view-display-id-block_1 view-dom-id-fd256160c1afe129e6f7dfc25ee14b7b">
        
  
  
      <div class="view-empty">
      <p><em>No questions yet ... </em></p>
    </div>
  
  
  
  
  
  
</div>  </div>
</div>
<div id="block-search-form" class="block block-search clearfix">

    
  <div class="content">
    <form action="5012" method="post" id="search-block-form" accept-charset="UTF-8"><div><div class="container-inline">
      <h2 class="element-invisible">Search form</h2>
    <div class="form-item form-type-textfield form-item-search-block-form">
  <label class="element-invisible" for="edit-search-block-form--2">Search </label>
 <input title="Enter the terms you wish to search for." type="text" id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128" class="form-text" />
</div>
<div class="form-actions form-wrapper" id="edit-actions--2"><input type="submit" id="edit-submit--2" name="op" value="Search" class="form-submit" /></div><input type="hidden" name="form_build_id" value="form-t6Zkgir6GevjOXG3OC2ego7QNkCGIoFLlacWqsgm0Dc" />
<input type="hidden" name="form_id" value="search_block_form" />
</div>
</div></form>  </div>
</div>
<div id="block-forum-active" class="block block-forum clearfix">

    <h2 class="title">Active forum topics</h2>
  
  <div class="content">
    <div class="item-list"><ul><li class="first"><a href="32356" title="3 comments">Can&#039;t access &quot;My account&quot;</a></li>
<li><a href="32371">Delete account</a></li>
<li class="last"><a href="32363">Outline</a></li>
</ul></div><div class="more-link"><a href="../forum" title="Read the latest forum topics.">More</a></div>  </div>
</div>
<div id="block-views-newest-questions-block-1" class="block block-views clearfix">

    <h2 class="title">Updated Questions</h2>
  
  <div class="content">
    <div class="view view-newest-questions view-id-newest_questions view-display-id-block_1 view-dom-id-47b90fe6c4019089d61fc414bf05f362">
        
  
  
      <div class="view-content">
      <div class="item-list">    <ul>          <li class="views-row views-row-1 views-row-odd views-row-first">  
  <span class="views-field views-field-title">        <span class="field-content"><a href="32373">Shadow and Highlights Recovery - Adding group undo</a></span>  </span>  
  <div class="views-field views-field-last-updated">    <span class="views-label views-label-last-updated">Last change</span>    <span class="field-content">3 hours 26 min</span>  </div>  
  <div class="views-field views-field-field-answer-count">        <div class="field-content">No answers, yet!</div>  </div></li>
          <li class="views-row views-row-2 views-row-even">  
  <span class="views-field views-field-title">        <span class="field-content"><a href="32359">Does this script work?</a></span>  </span>  
  <div class="views-field views-field-last-updated">    <span class="views-label views-label-last-updated">Last change</span>    <span class="field-content">4 months 2 weeks</span>  </div>  
  <div class="views-field views-field-field-answer-count">        <div class="field-content">No answers, yet!</div>  </div></li>
          <li class="views-row views-row-3 views-row-odd views-row-last">  
  <span class="views-field views-field-title">        <span class="field-content"><a href="32349">File upload problem</a></span>  </span>  
  <div class="views-field views-field-last-updated">    <span class="views-label views-label-last-updated">Last change</span>    <span class="field-content">6 months 38 min</span>  </div>  
  <div class="views-field views-field-field-answer-count">        <div class="field-content">1 Answer(s)</div>  </div></li>
      </ul></div>    </div>
  
  
  
      
<div class="more-link">
  <a href="../newest-questions">
    more  </a>
</div>
  
  
  
</div>  </div>
</div>
<div id="block-comment-recent" class="block block-comment clearfix">

    <h2 class="title">Recent comments</h2>
  
  <div class="content">
    <div class="item-list"><ul><li class="first"><a href="../comment/19262#comment-19262">Black triangles</a>&nbsp;<span>2 hours 32 min ago</span></li>
<li><a href="../comment/19261#comment-19261">I use the Python version of</a>&nbsp;<span>4 days 4 hours ago</span></li>
<li class="last"><a href="../comment/19260#comment-19260">I have the same problem too</a>&nbsp;<span>1 week 2 days ago</span></li>
</ul></div>  </div>
</div>
<div id="block-node-recent" class="block block-node clearfix">

    <h2 class="title">Recent content</h2>
  
  <div class="content">
    <table>
<tbody>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="32373">Shadow and Highlights Recovery - Adding group undo</a></div><div class="node-author"><span class="username">programmer_ceds</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="32360">GIMP Plugin Registry in Lockdown mode</a></div><div class="node-author"><span class="username">schumaml</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="32372">Split to Special PNG&#039;s</a></div><div class="node-author"><span class="username">Efenstor</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="32371">Delete account</a></div><div class="node-author"><span class="username">amarz82</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="32370">Export with MozJPEG</a></div><div class="node-author"><span class="username">Efenstor</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="32369">Shadow and Highlights Recovery</a></div><div class="node-author"><span class="username">erwinsoo</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="27656">GIMP Extensions Pack for Windows</a></div><div class="node-author"><span class="username">GIMP Extensions</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="32341">Removed...</a></div><div class="node-author"><span class="username">Le Gnou</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="odd"><td class="title-author"><div class="node-title"><a href="32368">ofn-preset-guides</a></div><div class="node-author"><span class="username">Ofnuts</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
 <tr class="even"><td class="title-author"><div class="node-title"><a href="28268">Export Layers</a></div><div class="node-author"><span class="username">khalim19</span></div></td><td class="edit"></td><td class="delete"></td> </tr>
</tbody>
</table>
  </div>
</div>
  </div>
        </div>
      
    </div> <!-- /#container -->
  </div> <!-- /#wrapper -->
  </body>
</html>
